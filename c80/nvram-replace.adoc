---
permalink: c80/nvram-replace.html 
sidebar: sidebar 
keywords: c80, replace an nvdimm 
summary: 'NVRAM 모듈은 NVRAM12와 DIMM과 NVRAM 모듈당 최대 2개의 NVMe SSD Flash Cache 모듈(Flash Cache 또는 캐싱 모듈)로 구성됩니다.' 
---
= NVRAM-AFF C80을 교체합니다
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
비휘발성 메모리에 결함이 있거나 업그레이드가 필요한 경우 AFF C80 시스템의 NVRAM를 교체하십시오. 교체 프로세스에는 손상된 컨트롤러를 종료하고, NVRAM 모듈 또는 NVRAM DIMM을 교체하고, 디스크를 재할당하고, 장애가 발생한 부품을 NetApp에 반환하는 작업이 포함됩니다.



== 2단계: NVRAM 모듈 또는 NVRAM DIMM을 교체합니다

적절한 다음 옵션을 사용하여 NVRAM 모듈 또는 NVRAM DIMM을 교체합니다.

[role="tabbed-block"]
====
.옵션 1: NVRAM 모듈을 교체합니다
--
NVRAM 모듈을 교체하려면 섀시의 슬롯 4/5에서 모듈을 찾고 구체적인 단계를 따릅니다.

. 섀시의 모든 드라이브가 중앙판에 단단히 장착되어 있는지 확인합니다. 엄지 손가락으로 각 드라이브를 눌러 멈춤 상태가 될 때까지 누릅니다.
+
image::../media/drw_a800_drive_seated_IEOPS-960.svg[시트 디스크 드라이브]

. 섀시 후면으로 이동합니다. 아직 접지되지 않은 경우 올바르게 접지하십시오.
. 아직 접지되지 않은 경우 올바르게 접지하십시오.
. 컨트롤러의 PSU를 분리합니다.
+

NOTE: 시스템에 DC 전원이 있는 경우 PSU에서 전원 블록을 분리합니다.

. 케이블 관리 트레이 안쪽에 있는 버튼을 당기고 아래로 돌려 케이블 관리 트레이를 아래로 돌립니다.
. 섀시에서 대상 NVRAM 모듈을 분리합니다.
+
.. 캠 래치 버튼을 누릅니다.
+
캠 버튼이 섀시에서 멀어져 있습니다.

.. 캠 래치를 끝까지 돌립니다.
.. 캠 레버 입구에 손가락을 넣고 모듈을 섀시에서 당겨 손상된 NVRAM 모듈을 섀시에서 분리합니다.
+
image::../media/drw_a70-90_nvram12_remove_replace_ieops-1370.svg[NVRAM12 모듈 및 DIMM을 분리합니다]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["설명선 번호 1"]
 a| 
캠 잠금 버튼



 a| 
image:../media/icon_round_2.png["설명선 번호 2"]
 a| 
DIMM 잠금 탭

|===


. NVRAM 모듈을 안정적인 표면에 놓습니다.
. 손상된 NVRAM 모듈에서 DIMM을 한 번에 하나씩 분리하여 교체 NVRAM 모듈에 설치합니다.
. 교체용 NVRAM 모듈을 섀시에 설치합니다.
+
.. 모듈을 슬롯 4/5의 섀시 입구 가장자리에 맞춥니다.
.. 모듈을 조심스럽게 슬롯에 완전히 밀어 넣은 다음 캠 래치를 위로 끝까지 밀어 모듈을 제자리에 잠급니다.


. 전원 코드를 전원 공급 장치에 연결합니다. 전원이 복구되면 컨트롤러가 재부팅됩니다.
+

NOTE: DC 전원 공급 장치가 있는 경우 전원 블록을 전원 공급 장치에 다시 연결합니다.

. 케이블 관리 트레이를 닫힘 위치까지 돌립니다.
. 손상된 컨트롤러를 다시 보관하여 정상 작동으로 되돌립니다 `storage failover giveback -ofnode _impaired_node_name_`.
. 자동 반환이 비활성화되어 있는 경우, 다음과 같이 다시 활성화하십시오 `storage failover modify -node local -auto-giveback true`.
. AutoSupport가 활성화된 경우 자동 케이스 생성을 복원/억제 해제: `system node autosupport invoke -node * -type all -message MAINT=END`


--
.옵션 2: NVRAM DIMM을 교체합니다
--
NVRAM 모듈에서 NVRAM DIMM을 교체하려면 먼저 NVRAM 모듈을 분리한 다음 대상 DIMM을 교체해야 합니다.

. 섀시의 모든 드라이브가 중앙판에 단단히 장착되어 있는지 확인합니다. 엄지 손가락으로 각 드라이브를 눌러 멈춤 상태가 될 때까지 누릅니다.
+
image::../media/drw_a800_drive_seated_IEOPS-960.svg[시트 디스크 드라이브]

. 섀시 후면으로 이동합니다. 아직 접지되지 않은 경우 올바르게 접지하십시오.
. 컨트롤러의 PSU를 분리합니다.
+

NOTE: 시스템에 DC 전원이 있는 경우 PSU에서 전원 블록을 분리합니다.

. 용지함 끝에 있는 핀을 살짝 당기고 용지함을 아래로 돌려 케이블 관리 트레이를 아래로 돌립니다.
. 섀시에서 대상 NVRAM 모듈을 분리합니다.
+
.. 캠 버튼을 누릅니다.
+
캠 버튼이 섀시에서 멀어져 있습니다.

.. 캠 래치를 끝까지 돌립니다.
.. 캠 레버 입구에 손가락을 넣고 모듈을 섀시에서 당겨 NVRAM 모듈을 섀시에서 분리합니다.
+
image::../media/drw_a70-90_nvram12_remove_replace_ieops-1370.svg[NVRAM12 모듈 및 DIMM을 분리합니다]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["설명선 번호 1"]
| 캠 잠금 버튼 


 a| 
image:../media/icon_round_2.png["설명선 번호 2"]
 a| 
DIMM 잠금 탭

|===


. NVRAM 모듈을 안정적인 표면에 놓습니다.
. NVRAM 모듈 내에서 교체할 DIMM을 찾습니다.
+

NOTE: NVRAM 모듈 측면에 있는 FRU 맵 레이블을 참조하여 DIMM 슬롯 1 및 2의 위치를 확인합니다.

. DIMM 잠금 탭을 누르고 소켓에서 DIMM을 들어올려 DIMM을 분리합니다.
. DIMM을 소켓에 맞추고 잠금 탭이 제자리에 잠길 때까지 DIMM을 소켓에 부드럽게 밀어 넣어 교체 DIMM을 설치합니다.
. NVRAM 모듈을 섀시에 설치합니다.
+
.. 캠 래치가 I/O 캠 핀과 맞물리기 시작할 때까지 모듈을 슬롯에 부드럽게 밀어 넣은 다음 캠 래치를 위로 끝까지 돌려 모듈을 제자리에 잠급니다.


. 전원 코드를 전원 공급 장치에 연결합니다. 전원이 복구되면 컨트롤러가 재부팅됩니다.
+

NOTE: DC 전원 공급 장치가 있는 경우 전원 블록을 전원 공급 장치에 다시 연결합니다.

. 케이블 관리 트레이를 닫힘 위치까지 돌립니다.
. 손상된 컨트롤러를 다시 보관하여 정상 작동으로 되돌립니다 `storage failover giveback -ofnode _impaired_node_name_`.
. 자동 반환이 비활성화되어 있는 경우, 다음과 같이 다시 활성화하십시오 `storage failover modify -node local -auto-giveback true`.
. AutoSupport가 활성화된 경우 자동 케이스 생성을 복원/억제 해제: `system node autosupport invoke -node * -type all -message MAINT=END`


--
====


== 3단계: 디스크를 다시 할당합니다

컨트롤러를 부팅할 때 시스템 ID 변경을 확인한 다음 변경 사항이 구현되었는지 확인해야 합니다.


CAUTION: 디스크 재할당은 NVRAM 모듈을 교체할 때만 필요하며 NVRAM DIMM 교체에는 적용되지 않습니다.

.단계
. 컨트롤러가 유지 관리 모드(표시)에 있는 경우 `*>` 프롬프트에서 유지 관리 모드를 종료하고 LOADER 프롬프트로 이동합니다.
+
`halt`

. 컨트롤러의 LOADER 프롬프트에서 컨트롤러를 부팅하고 시스템 ID가 일치하지 않아 시스템 ID를 재정의하라는 메시지가 표시될 때 _y_를 입력합니다.
. 교체 모듈이 있는 컨트롤러의 콘솔에 "환불 대기 중" 메시지가 표시될 때까지 기다린 다음, 정상 컨트롤러에서 새 파트너 시스템 ID가 자동으로 할당되었는지 확인하세요.
+
`storage failover show`

+
명령 출력에서 손상된 컨트롤러의 시스템 ID가 변경되었다는 메시지가 표시되어야 하며, 이전 ID와 새 ID가 올바르게 표시되어야 합니다.  다음 예에서 노드 2는 교체되었으며 새로운 시스템 ID는 151759706입니다.

+
[listing]
----
node1:> storage failover show
                                    Takeover
Node              Partner           Possible     State Description
------------      ------------      --------     -------------------------------------
node1             node2             false        System ID changed on partner (Old:
                                                  151759755, New: 151759706), In takeover
node2             node1             -            Waiting for giveback (HA mailboxes)
----
. 컨트롤러를 다시 제공합니다.
+
.. 건강한 컨트롤러에서 교체된 컨트롤러의 스토리지를 다시 제공합니다: +
`storage failover giveback -ofnode replacement_node_name`
+
컨트롤러가 스토리지를 다시 가져와 부팅을 완료합니다.

+
시스템 ID 불일치로 인해 시스템 ID를 무시하라는 메시지가 나타나면 _y_를 입력해야 합니다.

+
기브백이 거부되면 거부권을 재정의할 수 있습니다.

+
자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/ontap/high-availability/ha_manual_giveback.html#if-giveback-is-interrupted["수동 포기 명령"^] 거부권을 무효화하다.

.. 기브백이 완료된 후 HA 쌍이 정상 상태이고 테이크오버가 가능한지 확인합니다. _ 스토리지 페일오버 show _
+
'storage failover show' 명령의 출력에는 파트너 메시지에서 변경된 시스템 ID가 포함되지 않아야 합니다.



. 디스크가 올바르게 할당되었는지 확인하세요.
+
`storage disk show -ownership`

+
컨트롤러에 속한 디스크는 새 시스템 ID를 표시해야 합니다. 다음 예에서는 node1이 소유한 디스크에 새 시스템 ID 151759706이 표시됩니다.

+
[listing]
----
node1:> storage disk show -ownership

Disk  Aggregate Home  Owner  DR Home  Home ID    Owner ID  DR Home ID Reserver  Pool
----- ------    ----- ------ -------- -------    -------    -------  ---------  ---
1.0.0  aggr0_1  node1 node1  -        151759706  151759706  -       151759706 Pool0
1.0.1  aggr0_1  node1 node1           151759706  151759706  -       151759706 Pool0
.
.
.
----
. 시스템이 MetroCluster 구성인 경우 컨트롤러 상태를 모니터링합니다. _MetroCluster node show _
+
MetroCluster 구성을 정상 상태로 되돌리려면 교체 후 몇 분 정도 걸리며, 이 경우 각 컨트롤러에 구성된 상태가 표시되며 DR 미러링이 활성화되고 정상 모드가 표시됩니다. MetroCluster node show-fields node-systemid 명령 출력은 MetroCluster 구성이 정상 상태로 돌아갈 때까지 이전 시스템 ID를 표시합니다.

. 컨트롤러가 MetroCluster 구성에 있는 경우 MetroCluster 상태에 따라 원래 소유자가 재해 사이트의 컨트롤러인 경우 DR 홈 ID 필드에 디스크의 원래 소유자가 표시되는지 확인합니다.
+
다음 두 조건이 모두 참인 경우 이 작업이 필요합니다.

+
** MetroCluster 구성이 전환 상태입니다.
** 컨트롤러는 재해 사이트에 있는 디스크의 현재 소유자입니다.
+
을 참조하십시오 https://docs.netapp.com/us-en/ontap-metrocluster/manage/concept_understanding_mcc_data_protection_and_disaster_recovery.html#disk-ownership-changes-during-ha-takeover-and-metrocluster-switchover-in-a-four-node-metrocluster-configuration["4노드 MetroCluster 구성에서 HA 테이크오버 및 MetroCluster 스위치오버 중에 디스크 소유권이 변경됩니다"] 를 참조하십시오.



. 시스템이 MetroCluster 구성인 경우 각 컨트롤러가 구성되어 있는지 확인하십시오. _MetroCluster node show -fields configuration -state_
+
[listing]
----
node1_siteA::> metrocluster node show -fields configuration-state

dr-group-id            cluster node           configuration-state
-----------            ---------------------- -------------- -------------------
1 node1_siteA          node1mcc-001           configured
1 node1_siteA          node1mcc-002           configured
1 node1_siteB          node1mcc-003           configured
1 node1_siteB          node1mcc-004           configured

4 entries were displayed.
----
. 각 컨트롤러에 대해 예상 볼륨이 있는지 확인하세요.
+
`vol show -node node-name`

. 스토리지 암호화가 활성화된 경우 기능을 복원해야 합니다.
. 손상된 컨트롤러를 다시 설치하여 정상 작동으로 되돌립니다.
+
`storage failover giveback -ofnode _impaired_node_name_`..

. 자동 반환이 비활성화된 경우 다시 활성화하십시오.
+
`storage failover modify -node local -auto-giveback true`..

. AutoSupport가 활성화된 경우 자동 케이스 생성을 복원/억제 해제:
+
`system node autosupport invoke -node * -type all -message MAINT=END`..


