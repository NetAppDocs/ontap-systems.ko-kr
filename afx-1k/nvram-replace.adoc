---
permalink: afx-1k/nvram-replace.html 
sidebar: sidebar 
keywords: afx 1k, replace nvram 
summary: 비휘발성 메모리에 오류가 발생하거나 업그레이드가 필요한 경우 AFX 1K 스토리지 시스템의 NVRAM 교체하세요. 
---
= NVRAM 교체 - AFX 1K
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
비휘발성 메모리에 오류가 발생하거나 업그레이드가 필요한 경우 AFX 1K 스토리지 시스템의 NVRAM 교체하세요.  교체 프로세스에는 손상된 컨트롤러를 종료하고, NVRAM 모듈이나 NVRAM DIMM을 교체하고, 오류가 발생한 부품을 NetApp 으로 반환하는 작업이 포함됩니다.

NVRAM 모듈은 NVRAM12 하드웨어와 현장 교체 가능한 DIMM으로 구성됩니다. 장애가 발생한 NVRAM 모듈 또는 NVRAM 모듈 내부의 DIMM을 교체할 수 있습니다.

.시작하기 전에
* 교체 부품이 있는지 확인합니다. 장애가 발생한 구성 요소는 NetApp로부터 받은 교체 구성 요소로 교체해야 합니다.
* 스토리지 시스템의 다른 모든 구성 요소가 제대로 작동하는지 확인하고, 작동하지 않는 경우 에 문의하십시오 https://support.netapp.com["NetApp 지원"].




== 1단계: 손상된 컨트롤러를 종료합니다

컨트롤러를 종료하거나 손상된 컨트롤러를 인수합니다.

손상된 컨트롤러를 종료하려면 컨트롤러의 상태를 확인하고 필요한 경우 컨트롤러의 스토리지 장애 조치 인수를 수행하여 정상 컨트롤러가 손상된 컨트롤러 스토리지에서 데이터를 계속 제공할 수 있도록 해야 합니다.

.이 작업에 대해
* 4개 이상의 노드가 있는 클러스터가 있는 경우 쿼럼에 있어야 합니다.  노드에 대한 클러스터 정보를 보려면 다음을 사용하세요. `cluster show` 명령.  자세한 내용은 `cluster show` 명령, 참조link:https://docs.netapp.com/us-en/ontap/system-admin/display-nodes-cluster-task.html["ONTAP 클러스터에서 노드 수준 세부 정보 보기"^] .
* 클러스터가 쿼럼에 포함되지 않았거나 손상된 컨트롤러를 제외한 모든 컨트롤러의 상태 또는 적격성이 거짓으로 표시되는 경우 손상된 컨트롤러를 종료하기 전에 문제를 해결해야 합니다. 보다 link:https://docs.netapp.com/us-en/ontap/system-admin/synchronize-node-cluster-task.html?q=Quorum["노드를 클러스터와 동기화합니다"^] .


.단계
. AutoSupport가 활성화된 경우 AutoSupport 메시지를 호출하여 자동 케이스 생성을 억제합니다.
+
`system node autosupport invoke -node * -type all -message MAINT=<# of hours>h`

+
다음 AutoSupport 메시지는 2시간 동안 자동 케이스 생성을 억제합니다.

+
`cluster1:> system node autosupport invoke -node * -type all -message MAINT=2h`

. 손상된 컨트롤러의 콘솔에서 자동 반환을 비활성화합니다.
+
`storage failover modify -node impaired-node -auto-giveback-of false`

+

NOTE: _자동 환불을 비활성화하시겠습니까?_라는 메시지가 표시되면 다음을 입력하세요. `y` .

+
.. ONTAP 버전 9.17.1을 실행 중이고 손상된 컨트롤러를 가동할 수 없거나 이미 인수된 경우 손상된 컨트롤러를 부팅하기 전에 정상 컨트롤러에서 HA 상호 연결 링크를 끊어야 합니다.  이렇게 하면 손상된 컨트롤러가 자동으로 반환하는 것을 방지할 수 있습니다.
+
`system ha interconnect link off -node healthy-node -link 0`

+
`system ha interconnect link off -node healthy-node -link 1`

+

NOTE: ONTAP 버전 9.17.1을 실행하지 않는 경우 위 단계를 건너뛰고 3단계로 이동하세요.



. 손상된 컨트롤러를 로더 프롬프트로 가져가십시오.
+
[cols="1,2"]
|===
| 손상된 컨트롤러가 표시되는 경우... | 그러면... 


 a| 
LOADER 메시지가 표시됩니다
 a| 
다음 단계로 이동합니다.



 a| 
시스템 프롬프트 또는 암호 프롬프트
 a| 
건강한 컨트롤러로부터 손상된 컨트롤러를 인수하거나 중단합니다.
`storage failover takeover -ofnode _impaired_node_name_ -halt _true_`

_-halt true_ 매개변수는 손상된 노드를 LOADER 프롬프트로 가져옵니다.

|===




== 2단계: NVRAM 모듈 또는 NVRAM DIMM을 교체합니다

적절한 다음 옵션을 사용하여 NVRAM 모듈 또는 NVRAM DIMM을 교체합니다.

[role="tabbed-block"]
====
.옵션 1: NVRAM 모듈을 교체합니다
--
NVRAM 모듈을 교체하려면 인클로저의 슬롯 4/5에 있는 모듈을 찾아 특정 단계의 순서를 따릅니다.

. 아직 접지되지 않은 경우 올바르게 접지하십시오.
. 컨트롤러의 PSU에서 전원 공급 케이블을 분리합니다.
. 용지함 끝에 있는 핀을 살짝 당기고 용지함을 아래로 돌려 케이블 관리 트레이를 아래로 돌립니다.
. 인클로저에서 손상된 NVRAM 모듈을 분리합니다.
+
.. 캠 잠금 버튼을 누르십시오.
+
캠 버튼이 인클로저에서 멀리 이동합니다.

.. 캠 래치를 최대한 아래로 돌립니다.
.. 캠 레버 입구에 손가락을 넣고 인클로저에서 모듈을 당겨 손상된 NVRAM 모듈을 분리합니다.
+
image::../media/drw_a1k_nvram12_remove_replace_ieops-1380.svg[NVRAM12 모듈 및 DIMM을 분리합니다]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["설명선 번호 1"]
| 캠 잠금 버튼 


 a| 
image:../media/icon_round_2.png["설명선 번호 2"]
 a| 
DIMM 잠금 탭

|===


. NVRAM 모듈을 안정적인 표면에 놓습니다.
. 손상된 NVRAM 모듈에서 DIMM을 한 번에 하나씩 분리하여 교체 NVRAM 모듈에 설치합니다.
. 교체용 NVRAM 모듈을 엔클로저에 설치합니다.
+
.. 모듈을 슬롯 4/5의 인클로저 입구 가장자리에 맞춥니다.
.. 모듈을 조심스럽게 슬롯에 밀어 넣은 다음 캠 래치를 위로 끝까지 돌려 모듈을 제자리에 잠급니다.


. 케이블 관리 트레이를 닫힘 위치까지 돌립니다.


--
.옵션 2: NVRAM DIMM을 교체합니다
--
NVRAM 모듈에서 NVRAM DIMM을 교체하려면 NVRAM 모듈을 분리한 다음 대상 DIMM을 교체해야 합니다.

. 아직 접지되지 않은 경우 올바르게 접지하십시오.
. PSU에서 전원 공급 케이블을 분리합니다.
. 용지함 끝에 있는 핀을 살짝 당기고 용지함을 아래로 돌려 케이블 관리 트레이를 아래로 돌립니다.
. 엔클로저에서 대상 NVRAM 모듈을 분리합니다.
+
image::../media/drw_a1k_nvram12_remove_replace_ieops-1380.svg[NVRAM 12 모듈 및 DIMM을 분리합니다]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["설명선 번호 1"]
| 캠 잠금 버튼 


 a| 
image:../media/icon_round_2.png["설명선 번호 2"]
 a| 
DIMM 잠금 탭

|===
. NVRAM 모듈을 안정적인 표면에 놓습니다.
. NVRAM 모듈 내에서 교체할 DIMM을 찾습니다.
+

NOTE: NVRAM 모듈 측면에 있는 FRU 맵 레이블을 참조하여 DIMM 슬롯 1 및 2의 위치를 확인합니다.

. DIMM 잠금 탭을 누르고 소켓에서 DIMM을 들어올려 DIMM을 분리합니다.
. DIMM을 소켓에 맞추고 잠금 탭이 제자리에 잠길 때까지 DIMM을 소켓에 부드럽게 밀어 넣어 교체 DIMM을 설치합니다.
. 엔클로저에 NVRAM 모듈을 설치합니다.
+
.. 캠 래치가 I/O 캠 핀과 맞물리기 시작할 때까지 모듈을 슬롯에 부드럽게 밀어 넣은 다음 캠 래치를 위로 끝까지 돌려 모듈을 제자리에 잠급니다.


. 케이블 관리 트레이를 닫힘 위치까지 돌립니다.


--
====


== 3단계: 컨트롤러를 재부팅합니다

FRU를 교체한 후에는 컨트롤러 모듈을 재부팅해야 합니다.

. 전원 케이블을 PSU에 다시 꽂으세요.
+
일반적으로 LOADER 프롬프트에서 시스템이 재부팅되기 시작합니다.

. 입력하다 `bye` LOADER 프롬프트에서.




== 4단계: NVRAM 교체 완료

NVRAM 교체를 완료하려면 다음 단계를 수행하세요.

.단계
. 컨트롤러의 LOADER 프롬프트에서 컨트롤러를 부팅하고 시스템 ID가 일치하지 않아 시스템 ID를 재정의하라는 메시지가 표시될 때 _y_를 입력합니다.
+
다음은 시스템 ID를 재정의하기 위한 프롬프트의 예입니다.

+
[listing]
----
WARNING: System ID mismatch. This usually occurs when replacing a boot device or NVRAM cards!
Override system ID? {y|n}
----
. 정상 컨트롤러에서 새 파트너 시스템 ID가 자동으로 할당되었는지 확인하세요.
`_storage failover show_`
+
명령 출력에서 저장소 교체의 현재 상태를 표시하는 메시지가 표시됩니다.  다음 예에서, node2는 교체를 거쳤으며 현재 상태를 "인수 중"으로 표시합니다.

+
[listing]
----
node1:> storage failover show
                                    Takeover
Node              Partner           Possible     State Description
------------      ------------      --------     -------------------------------------
node1             node2             false        In takeover
node2             node1             -            Waiting for giveback
----
. 컨트롤러를 다시 제공합니다.
+
.. 정상 컨트롤러에서 교체된 컨트롤러의 스토리지를 다시 제공합니다: `_storage failover giveback -ofnode replacement_node_name_`
+
컨트롤러가 스토리지를 다시 가져와 부팅을 완료합니다.

+

NOTE: 기브백이 거부되면 거부권을 재정의할 수 있습니다.

+
자세한 내용은 를 참조하십시오 https://docs.netapp.com/us-en/ontap/high-availability/ha_manual_giveback.html#if-giveback-is-interrupted["수동 반환 명령"^] 거부권을 무효화하기 위한 주제.

.. 기브백이 완료된 후 HA 쌍이 정상 상태이고 테이크오버가 가능한지 확인합니다. _ 스토리지 페일오버 show _
+
'storage failover show' 명령의 출력에는 파트너 메시지에서 변경된 시스템 ID가 포함되지 않아야 합니다.



. 각 컨트롤러에 대해 예상 볼륨이 있는지 확인하세요.
+
`vol show -node node-name`

. 콘솔 메시지가 중지되면 <enter> 키를 누릅니다.
+
** _로그인_ 프롬프트가 표시되면 다음 단계로 넘어가세요.
** 로그인 프롬프트가 나타나지 않으면 파트너 노드에 로그인하세요.


. 반환 보고서가 완료된 후 5분 동안 기다린 다음 페일오버 상태와 반환 상태를 확인합니다.
+
`storage failover show`그리고 `storage failover show-giveback`

+

NOTE: 다음 명령은 진단 모드 권한 수준에서만 사용할 수 있습니다.

. HA 인터커넥트 링크가 끊어진 경우 다시 연결하세요.
+
`system ha interconnect link on -node healthy-node -link 0`

+
`system ha interconnect link on -node healthy-node -link 1`

. 손상된 컨트롤러를 다시 설치하여 정상 작동으로 되돌립니다.
+
'Storage failover 반환 - ofnode_impaired_node_name_'

. 자동 반환이 비활성화된 경우 다시 활성화하십시오.
+
`storage failover modify -node local -auto-giveback-of true`

. AutoSupport가 활성화된 경우 자동 케이스 생성을 복원/억제 해제:
+
`system node autosupport invoke -node * -type all -message MAINT=END`





== 5단계: 장애가 발생한 부품을 NetApp에 반환

키트와 함께 제공된 RMA 지침에 설명된 대로 오류가 발생한 부품을 NetApp에 반환합니다.  https://mysupport.netapp.com/site/info/rma["부품 반환 및 교체"]자세한 내용은 페이지를 참조하십시오.
