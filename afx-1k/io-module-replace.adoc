---
permalink: afx-1k/io-module-replace.html 
sidebar: sidebar 
keywords: afx 1k, replace a pcie card 
summary: AFX 1K 스토리지 시스템의 I/O 모듈에 오류가 발생하거나 더 높은 성능이나 추가 기능을 지원하기 위한 업그레이드가 필요한 경우 해당 모듈을 교체합니다. 교체 절차는 컨트롤러 종료, 장애 발생 I/O 모듈 교체, 컨트롤러 재부팅, 그리고 장애 발생 부품을 NetApp 에 반환하는 과정으로 구성됩니다. 
---
= I/O 모듈 교체 - AFX 1K
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
AFX 1K 스토리지 시스템의 I/O 모듈에 오류가 발생하면 해당 모듈을 교체합니다. 교체 절차는 컨트롤러 종료, 장애 발생 I/O 모듈 교체, 컨트롤러 재부팅, 그리고 장애 발생 부품을 NetApp 에 반환하는 과정으로 구성됩니다.

스토리지 시스템에서 지원하는 모든 ONTAP 버전에 이 절차를 사용할 수 있습니다.

.시작하기 전에
* 교체 부품이 있어야 합니다.
* 스토리지 시스템의 다른 모든 구성 요소가 제대로 작동하는지 확인하고, 작동하지 않는 경우 기술 지원 부서에 문의하십시오.




== 1단계: 장애가 있는 노드를 종료합니다

컨트롤러를 종료하거나 손상된 컨트롤러를 인수합니다.

손상된 컨트롤러를 종료하려면 컨트롤러의 상태를 확인하고 필요한 경우 컨트롤러의 스토리지 장애 조치 인수를 수행하여 정상 컨트롤러가 손상된 컨트롤러 스토리지에서 데이터를 계속 제공할 수 있도록 해야 합니다.

.이 작업에 대해
* 4개 이상의 노드가 있는 클러스터가 있는 경우 쿼럼에 있어야 합니다.  노드에 대한 클러스터 정보를 보려면 다음을 사용하세요. `cluster show` 명령.  자세한 내용은 `cluster show` 명령, 참조link:https://docs.netapp.com/us-en/ontap/system-admin/display-nodes-cluster-task.html["ONTAP 클러스터에서 노드 수준 세부 정보 보기"^] .
* 클러스터가 쿼럼에 포함되지 않았거나 손상된 컨트롤러를 제외한 모든 컨트롤러의 상태 또는 적격성이 거짓으로 표시되는 경우 손상된 컨트롤러를 종료하기 전에 문제를 해결해야 합니다. 보다 link:https://docs.netapp.com/us-en/ontap/system-admin/synchronize-node-cluster-task.html?q=Quorum["노드를 클러스터와 동기화합니다"^] .


.단계
. AutoSupport가 활성화된 경우 AutoSupport 메시지를 호출하여 자동 케이스 생성을 억제합니다.
+
`system node autosupport invoke -node * -type all -message MAINT=<# of hours>h`

+
다음 AutoSupport 메시지는 2시간 동안 자동 케이스 생성을 억제합니다.

+
`cluster1:> system node autosupport invoke -node * -type all -message MAINT=2h`

. 손상된 컨트롤러의 콘솔에서 자동 반환을 비활성화합니다.
+
`storage failover modify -node impaired-node -auto-giveback-of false`

+

NOTE: _자동 환불을 비활성화하시겠습니까?_라는 메시지가 표시되면 다음을 입력하세요. `y` .

+
.. ONTAP 버전 9.17.1을 실행 중이고 손상된 컨트롤러를 가동할 수 없거나 이미 인수된 경우 손상된 컨트롤러를 부팅하기 전에 정상 컨트롤러에서 HA 상호 연결 링크를 끊어야 합니다.  이렇게 하면 손상된 컨트롤러가 자동으로 반환하는 것을 방지할 수 있습니다.
+
`system ha interconnect link off -node healthy-node -link 0`

+
`system ha interconnect link off -node healthy-node -link 1`

+

NOTE: ONTAP 버전 9.17.1을 실행하지 않는 경우 위 단계를 건너뛰고 3단계로 이동하세요.



. 손상된 컨트롤러를 로더 프롬프트로 가져가십시오.
+
[cols="1,2"]
|===
| 손상된 컨트롤러가 표시되는 경우... | 그러면... 


 a| 
LOADER 메시지가 표시됩니다
 a| 
다음 단계로 이동합니다.



 a| 
시스템 프롬프트 또는 암호 프롬프트
 a| 
건강한 컨트롤러로부터 손상된 컨트롤러를 인수하거나 중단합니다.
`storage failover takeover -ofnode _impaired_node_name_ -halt _true_`

_-halt true_ 매개변수는 손상된 노드를 LOADER 프롬프트로 가져옵니다.

|===




== 2단계: 장애가 발생한 입출력 모듈을 교체합니다

I/O 모듈을 교체하려면 인클로저 내에서 해당 모듈을 찾고 특정 단계를 따르십시오.

. 아직 접지되지 않은 경우 올바르게 접지하십시오.
. 대상 I/O 모듈의 케이블을 뽑습니다.
+

NOTE: 모듈을 다시 설치할 때 케이블을 올바른 포트에 연결할 수 있도록 케이블이 연결된 위치를 표시해 두세요.

. 케이블 관리 트레이 안쪽의 양쪽에 있는 단추를 당겨 케이블 관리 트레이를 아래로 돌린 다음 트레이를 아래로 돌립니다.
+

NOTE: 다음 그림에서는 수평 및 수직 I/O 모듈 분리를 보여 줍니다. 일반적으로 하나의 입출력 모듈만 제거합니다.

+
image:../media/drw_a1k_io_remove_replace_ieops-1382.svg["입출력 모듈을 분리합니다"]

+
[cols="1,4"]
|===


 a| 
image:../media/icon_round_1.png["설명선 번호 1"]
 a| 
I/O 캠 래치

|===
+
케이블을 어디에 연결했는지 알 수 있도록 케이블에 레이블을 지정해야 합니다.

. 엔클로저에서 타겟 입출력 모듈을 분리합니다.
+
.. 대상 모듈의 캠 버튼을 누릅니다.
.. 캠 래치를 모듈에서 최대한 멀리 돌립니다.
.. 캠 레버 입구에 손가락을 넣고 엔클로저 밖으로 모듈을 당겨 엔클로저에서 모듈을 분리합니다.
+
입출력 모듈이 있던 슬롯을 추적해야 합니다.



. 입출력 모듈을 따로 보관해 둡니다.
. 교체용 입출력 모듈을 엔클로저에 설치합니다.
+
.. 모듈을 인클로저 슬롯 입구의 가장자리에 맞춥니다.
.. 모듈을 인클로저 끝까지 슬롯에 부드럽게 밀어 넣은 다음 캠 래치를 위로 끝까지 돌려 모듈을 제자리에 잠급니다.


. I/O 모듈을 다시 케이블로 연결합니다.
. 케이블 관리 트레이를 닫힘 위치까지 돌립니다.




== 3단계: 컨트롤러를 재부팅합니다

I/O 모듈을 교체한 후에는 컨트롤러를 재부팅해야 합니다.

. LOADER 프롬프트에서 컨트롤러를 재부팅합니다.
+
`bye`

+

NOTE: 손상된 컨트롤러를 재부팅하면 I/O 모듈 및 기타 구성 요소도 다시 초기화됩니다.

. 콘솔 메시지가 중지되면 <enter> 키를 누릅니다.
+
** _로그인_ 프롬프트가 표시되면 다음 단계로 넘어가세요.
** 로그인 프롬프트가 나타나지 않으면 파트너 노드에 로그인하세요.


. override-destination-checks 옵션을 사용하여 루트만 반환:
+
`storage failover giveback -ofnode impaired-node -only-root true -override -destination-checks true`

+

NOTE: 다음 명령은 진단 모드 권한 수준에서만 사용할 수 있습니다.  권한 수준에 대한 자세한 내용은 다음을 참조하세요.link:https://docs.netapp.com/us-en/ontap/system-admin/administrative-privilege-levels-concept.html["ONTAP CLI 명령에 대한 권한 수준을 이해합니다."^] .

+
오류가 발생하면 에 문의하십시오 https://support.netapp.com["NetApp 지원"].

. 반환 보고서가 완료된 후 5분 동안 기다린 다음 페일오버 상태와 반환 상태를 확인합니다.
+
`storage failover show`그리고 `storage failover show-giveback`

+

NOTE: 다음 명령은 진단 모드 권한 수준에서만 사용할 수 있습니다.

. HA 인터커넥트 링크가 끊어진 경우 다시 연결하세요.
+
`system ha interconnect link on -node healthy-node -link 0`

+
`system ha interconnect link on -node healthy-node -link 1`

. 자동 반환이 비활성화된 경우 다시 활성화하십시오.
+
`storage failover modify -ofnode impaired-node -automatic-giveback true`

. 손상된 컨트롤러를 다시 설치하여 정상 작동으로 되돌립니다.
+
'Storage failover 반환 - ofnode_impaired_node_name_'

. 정상 상태의 컨트롤러 콘솔에서 자동 반환 복원:
+
`storage failover modify -node local -auto-giveback-of true`

. AutoSupport가 활성화된 경우 자동 케이스 생성을 복원/억제 해제:
+
`system node autosupport invoke -node * -type all -message MAINT=END`





== 4단계: 장애가 발생한 부품을 NetApp에 반환

키트와 함께 제공된 RMA 지침에 설명된 대로 오류가 발생한 부품을 NetApp에 반환합니다.  https://mysupport.netapp.com/site/info/rma["부품 반환 및 교체"]자세한 내용은 페이지를 참조하십시오.
